<div style="margin-bottom: 1em">
  <span style="margin-right: 1em" *ngFor="let section of selectedSections">
    <mat-checkbox [(ngModel)]="section.selected" (change)="onSectionSelectionChange()">
      {{section.name}}
    </mat-checkbox>
  </span>
</div>

<mat-table [dataSource]="dataSource" matSort>

  <ng-container matColumnDef="contentId">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Content ID </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.contentId}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="question">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Question </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.question}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="section">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Section </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.section}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="category">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Subsection </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.category}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="date">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.date | date}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="value">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Value </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.value }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="annotation">
    <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
    <mat-cell *matCellDef="let row">
      <mat-icon *ngIf="row.annotation?.length > 0" matTooltip="Record Contains Annotation">edit_note</mat-icon>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;"(click)="onSelectRow(row)"
           class="example-element-row"
           style="cursor:pointer"
           [ngClass]="{'selected-row-background': row.contentId === selectedRow?.contentId,
              'flagged-row': row.flag === 'Invalid Entry' && !(row.contentId === selectedRow?.contentId)}">
  </mat-row>
</mat-table>

<mat-paginator [pageSizeOptions]="[10, 25, 50, 100]"></mat-paginator>
